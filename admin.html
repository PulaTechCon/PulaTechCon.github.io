<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin – PulaTechCon 2025</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 2rem; color: #333; }
    header { background: #2e2a8f; color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; }
    nav a { color: white; text-decoration: none; margin-left: 1.5rem; font-weight: bold; }
    main { max-width: 900px; margin: 2rem auto; background: white; padding: 1rem; border-radius: 8px; }
    .participant { background: #fafafa; padding: 1rem; margin: 1rem 0; border: 1px solid #ccc; border-radius: 6px; }
    button { margin-right: 1rem; padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; }
    .print-btn { background: #2e2a8f; color: white; }
    .delete-btn { background: #c0392b; color: white; }
  </style>
</head>
<body>
  <header>
    <h1>Admin Panel</h1>
    <nav>
      <a href="index.html">Home</a>
      <a href="schedule.html">Schedule</a>
      <a href="lunch.html">Lunch</a>
    </nav>
  </header>

  <main>
    <h2>Registered User</h2>
    <div id="userInfo"></div>

    <h2>Lunch Orders</h2>
    <div id="lunchOrders"></div>
  </main>

  <script>
    function renderUser() {
      const container = document.getElementById('userInfo')
      const user = JSON.parse(localStorage.getItem('pulatechcon_user') || '{}')
      if (!user.fname || !user.lname || !user.aff) {
        container.innerHTML = "<p>No user registered.</p>"
        return
      }
      container.innerHTML = `
        <div class="participant">
          <p><strong>${user.fname} ${user.lname}</strong> – ${user.aff}</p>
          <button class="print-btn" onclick="printBadge()">Print Badge</button>
          <button class="delete-btn" onclick="deleteUser()">Delete</button>
        </div>
      `
    }

    function printBadge() {
      const user = JSON.parse(localStorage.getItem('pulatechcon_user'))
      const w = window.open("", "", "width=300,height=200")
      w.document.write(`<h1>${user.fname} ${user.lname}</h1><h3>${user.aff}</h3><script>window.print();<\/script>`)
      w.document.close()
    }

    function deleteUser() {
      if (confirm("Delete this user?")) {
        localStorage.removeItem('pulatechcon_user')
        location.reload()
      }
    }

    function renderLunchOrders() {
      const container = document.getElementById('lunchOrders')
      const orders = JSON.parse(localStorage.getItem('lunchOrders') || '[]')
      if (orders.length === 0) {
        container.innerHTML = "<p>No lunch orders yet.</p>"
        return
      }
      container.innerHTML = orders.map(o =>
        `<div class="participant"><p><strong>${o.name}</strong>: ${o.menu}</p></div>`
      ).join('')
    }

    renderUser()
    renderLunchOrders()
  </script>
</body>
</html>
